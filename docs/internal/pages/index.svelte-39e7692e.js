var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,i=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&l(e,a,t[a]);if(s)for(var a of s(t))n.call(t,a)&&l(e,a,t[a]);return e},o=(e,s)=>t(e,a(s));import{J as c,K as u,C as d,S as f,i as h,s as m,e as g,t as p,k as v,c as y,a as w,g as b,d as L,n as x,b as $,L as D,f as T,H as I,M as k,N as S,O as E,l as N,I as P,P as O,Q as H,R,T as U,U as z,V as A,x as M,r as j,u as J,w as B,W as Y,h as F,X as V,Y as X,Z as q,j as C,m as W,o as Q,_,$ as K,v as Z,A as G,a0 as ee}from"../chunks/vendor-c377ece7.js";const te=new c("https://bqljggidsuurzwjgspix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzMzc2MTI0MywiZXhwIjoxOTQ5MzM3MjQzfQ.lQzW2bbkwkN4IPf0QqJVHkTh_YJdd9mATglBUktRBpA",{});function ae(e,t){document.cookie=`${e}=${JSON.stringify(t)}`}async function se(e,t){const a=JSON.stringify(t),{data:s,error:r}=await te.storage.from("images").upload(`${e.id}/frameData.txt`,a,{upsert:!0});r&&console.log(r)}async function re(e){const t=new Blob,{data:a,error:s}=await te.storage.from("images").upload(`${e.id}/_blank.txt`,t,{upsert:!0});console.log(a),console.log(s)}const ne=new c("https://bqljggidsuurzwjgspix.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzMzc2MTI0MywiZXhwIjoxOTQ5MzM3MjQzfQ.lQzW2bbkwkN4IPf0QqJVHkTh_YJdd9mATglBUktRBpA",{});let le,ie,oe;const ce=d({loggedIn:le,userData:ie,sessionData:oe}),ue=async()=>{const e=function(e){const t=document.cookie.split(";").find((t=>t.includes(`${e}=`)));return t?JSON.parse(t.split("=")[1]):null}("refreshToken"),{user:t,session:a,error:s}=await ne.auth.signIn({refreshToken:e});return!s&&(ae("refreshToken",a.refresh_token),await re(t),ce.update((()=>({userData:t,sessionData:a,loggedIn:!0}))),ie=t,le=!0,oe=a,!0)};let de;function fe(e,t,a){e.setItem(t,JSON.stringify(a))}function he(e,t,a){let s=null;try{if(s=JSON.parse(e.getItem(t)),""==s)throw new Error("Smile empty soul");return s}catch(r){return console.warn(r),a}}function me(e){null==e.userData?fe(de,"frameList",e.frameList):se(e.userData,e.frameList),console.log("saved uwu ✨")}de=window.localStorage;let ge=0;const pe=[{currentTrans:"",currentState:"",framesSnapshot:[]}],ve=d({currentTrans:"",currentState:"",framesSnapshot:[]});function ye(){ve.update((()=>(ge+=1,ge===pe.length&&(ge=pe.length-1),pe[ge])))}function we(e){ge+=1;const t=pe,a=o(i({},t[ge-1]),{framesSnapshot:e});t.push(a),ve.update((()=>a))}function be(e,t,a){return{currentTrans:"",currentState:e[t],framesSnapshot:a}}const Le={width:20,height:20,x:0,y:0};function xe(e){return console.log(e),new Promise(((t,a)=>{e.url||a();const s=e.frameList.length;let r={url:e.url,width:400,height:400,x:100,y:100,style:"",id:s,topLeftHandle:Le,topRightHandle:o(i({},Le),{x:380}),bottomRightHandle:o(i({},Le),{x:380,y:380}),bottomLeftHandle:o(i({},Le),{y:380}),top:!0,active:!0,aspect:0,offset:[0,0]};const n=new Image;n.src=r.url,n.onload=()=>{console.log(n.naturalHeight,n.naturalWidth),r.height=n.naturalHeight,r.width=n.naturalWidth,r.aspect=r.width/r.height,r=Ie(r),r.style=$e(r),Ne(r),t(r)}}))}function $e(e,t){let a,s="",r=e.width,n=e.height;if(t)switch(t){case"tleft":r=e.topLeftHandle.width,n=e.topLeftHandle.height,a=` top: ${e.topLeftHandle.y}px; left: ${e.topLeftHandle.x}px;`;break;case"tright":r=e.topRightHandle.width,n=e.topRightHandle.height,a=` top: ${e.topRightHandle.y}px; left: ${e.topRightHandle.x}px;`;break;case"bleft":r=e.bottomLeftHandle.width,n=e.bottomLeftHandle.height,a=` top: ${e.bottomLeftHandle.y}px; left: ${e.bottomLeftHandle.x}px;`;break;case"bright":r=e.bottomRightHandle.width,n=e.bottomRightHandle.height,a=` top: ${e.bottomRightHandle.y}px; left: ${e.bottomRightHandle.x}px;`;break;default:return}return s=`width: ${r}px; height: ${n}px; position: fixed;`,t||(s+=` background-image: url('${e.url}'); top: ${e.y}px; left: ${e.x}px;`),t&&(s+=a),s}function De(e){return e.map((e=>o(i({},e),{active:!1})))}function Te(e){return JSON.parse(JSON.stringify(e))}function Ie(e){const t=e.width/e.height;let a=window.visualViewport.width/2,s=window.visualViewport.width/2;return e.width>e.height?s=a/t:a=s*t,console.log(a,s,t),o(i({},e),{width:a,height:s})}function ke(e){switch(e.frameList.filter((e=>1==e.active)),e.event.key){case"a":e.event.ctrlKey&&(e.frameList=e.frameList.map((e=>o(i({},e),{active:!0}))),we(e.frameList),me({userData:e.userData,frameList:e.frameList}));break;case"A":e.event.ctrlKey&&(e.frameList=De(e.frameList),we(e.frameList),me({userData:e.userData,frameList:e.frameList}));break;case"y":e.event.ctrlKey&&ye();break;case"z":e.event.ctrlKey&&(console.log("reversing history uwu ✨"),ve.update((()=>0==ge?(me([]),null):ge>0?(ge-=1,console.log(pe[ge].framesSnapshot),me(pe[ge].framesSnapshot),pe[ge]):void 0)));break;case"Z":e.event.ctrlKey&&(console.log("yay~"),ye());break;case"Escape":e.frameList=De(e.frameList),we(e.frameList),me({userData:e.userData,frameList:e.frameList});break;case"Delete":case"Backspace":e.frameList=e.frameList.filter((e=>0==e.active)),we(e.frameList),me({userData:e.userData,frameList:e.frameList});break;case"ArrowLeft":e.frameList=Se(e.frameList,"left"),we(e.frameList),me({userData:e.userData,frameList:e.frameList});break;case"ArrowRight":e.frameList=Se(e.frameList,"right"),we(e.frameList),me({userData:e.userData,frameList:e.frameList});break;case"ArrowUp":e.frameList=Se(e.frameList,"up"),we(e.frameList),me({userData:e.userData,frameList:e.frameList});break;case"ArrowDown":e.frameList=Se(e.frameList,"down"),we(e.frameList),me({userData:e.userData,frameList:e.frameList})}if(e.frameList)return e.frameList}function Se(e,t){const a=40,s=function(e){return e.filter((e=>1==e.top))[0]}(e);switch(t){case"left":e[s.id].x=e[s.id].x-a-e[s.id].x%a,console.log(e[s.id].x);break;case"right":e[s.id].x=e[s.id].x+a-e[s.id].x%a;break;case"up":e[s.id].y=e[s.id].y-a-e[s.id].y%a;break;case"down":e[s.id].y=e[s.id].y+a-e[s.id].y%a}return Ne(s),e[s.id].style=$e(s),e}function Ee(e,t,a){if("mouse"===(null==e?void 0:e.pointerType)){const a={x:0,y:0};a.x=e.movementX,a.y=e.movementY,t.x+=a.x,t.y+=a.y}else t.x=e.changedTouches[0].clientX-a[0],t.y=e.changedTouches[0].clientY-a[1],console.log(a[0]);return(t=Ne(t)).style=$e(t),t}function Ne(e){return e.topLeftHandle.x=e.x,e.topLeftHandle.y=e.y,e.topRightHandle.x=e.x+e.width-e.topRightHandle.width,e.topRightHandle.y=e.y,e.bottomLeftHandle.x=e.x,e.bottomLeftHandle.y=e.y+e.height-e.bottomLeftHandle.height,e.bottomRightHandle.x=e.x+e.width-e.bottomRightHandle.width,e.bottomRightHandle.y=e.y+e.height-e.bottomRightHandle.height,e}async function Pe(e){var t,a,s,r;const n=null==(a=null==(t=e.event)?void 0:t.clipboardData)?void 0:a.items[0].getAsFile();let l=null==(r=null==(s=e.event)?void 0:s.clipboardData)?void 0:r.getData("text");if(console.log(e.loggedIn),n)if(console.log("image pasted"),0==e.loggedIn){await async function(e){const t=new FileReader;let a;t.addEventListener("loadend",(s=>{a=t.result;let r=he(e.appStorage,"localImages",[]);if(null!=r||(r=[]),0!=r.length||null!=r){const t=r.filter((t=>t.id==e.frameList.length));(t.length<1||null==t)&&(r.push({imageFile:e.imageFile,id:e.frameList.length,type:e.imageFile.type,text:a}),fe(e.appStorage,"localImages",r))}0==r.length&&(r.push({imageFile:e.imageFile,id:e.frameList.length,type:e.imageFile.type,text:a}),fe(e.appStorage,"localImages",r))})),t.readAsDataURL(e.imageFile)}({imageFile:n,frameList:e.frameList,appStorage:e.appStorage});const t=function(e){let t=[];return t=he(e.appStorage,"localImages",[]),null==t&&(t=[]),t.filter((t=>t.id==e.frameList.length))[0]}({appStorage:e.appStorage,frameList:e.frameList});l=t.text}else{const{error:t,imageUrl:a}=await async function(e){const t=u(),{data:a,error:s}=await te.storage.from("images").upload(`${e.userData.id}/${t}`,e.imageFile,{upsert:!0});if(s)return{error:s,imageUrl:null};{console.log(a.Key);const{error:s,publicURL:r}=await te.storage.from("images").getPublicUrl(`${e.userData.id}/${t}`);return s?{error:s,imageUrl:null}:(console.log(r),{error:null,imageUrl:r})}}({userData:e.userData,imageFile:n});t?console.log(t):(l=a,console.log(l))}let i=await xe({userData:e.userData,url:l,frameList:e.frameList});i.x=50,i.y=100,i.style=`position:fixed; left:${i.x}px; top:${i.y}px;`;const o=new Image;o.src=l,console.log(l),o.onload=()=>{console.log(o.naturalHeight,o.naturalWidth),i.height=o.naturalHeight,i.width=o.naturalWidth,i=Ie(i),i.style=$e(i),Ne(i),l&&(e.frameList=[...e.frameList,i]),e.frameList=He(i.id,e.frameList),console.log(e.frameList.filter((e=>e.id==i.id))),we(e.frameList)}}function Oe(e){return e.filter((e=>null!==e||void 0!==e))}function He(e,t){return t.map((t=>t=t.id==e?o(i({},t),{top:!0,active:!0}):o(i({},t),{top:!1,active:!1})))}function Re(e){let t,a,s,r,n,l,i,o,c,u,d,f,h,m,N,P,O,H,R,U;return{c(){t=g("div"),a=g("button"),s=p("Delete"),l=v(),i=g("div"),u=v(),d=g("div"),m=v(),N=g("div"),P=p("Resize"),this.h()},l(e){t=y(e,"DIV",{class:!0,draggable:!0,style:!0});var r=w(t);a=y(r,"BUTTON",{class:!0});var n=w(a);s=b(n,"Delete"),n.forEach(L),r.forEach(L),l=x(e),i=y(e,"DIV",{class:!0,draggable:!0,style:!0}),w(i).forEach(L),u=x(e),d=y(e,"DIV",{class:!0,draggable:!0,style:!0}),w(d).forEach(L),m=x(e),N=y(e,"DIV",{class:!0,style:!0});var o=w(N);P=b(o,"Resize"),o.forEach(L),this.h()},h(){$(a,"class","svelte-qzwrll"),$(t,"class",r=D(`${e[2]} handle handle-tleft`)+" svelte-qzwrll"),$(t,"draggable","true"),$(t,"style",n=$e(e[0],"tleft")),$(i,"class",o=D(`${e[2]} handle handle-tright`)+" svelte-qzwrll"),$(i,"draggable","true"),$(i,"style",c=$e(e[0],"tright")),$(d,"class",f=D(`${e[2]} handle handle-bleft`)+" svelte-qzwrll"),$(d,"draggable","true"),$(d,"style",h=$e(e[0],"bleft")),$(N,"class",O=D(`${e[2]} handle handle-bright`)+" svelte-qzwrll"),$(N,"style",H=$e(e[0],"bright"))},m(r,n){T(r,t,n),I(t,a),I(a,s),T(r,l,n),T(r,i,n),T(r,u,n),T(r,d,n),T(r,m,n),T(r,N,n),I(N,P),R||(U=[k(a,"click",e[12]),k(t,"dragstart",e[13]),k(i,"dragstart",e[14]),k(d,"dragstart",e[15]),k(d,"dragover",S(e[16])),k(N,"pointerdown",e[17])],R=!0)},p(e,a){4&a&&r!==(r=D(`${e[2]} handle handle-tleft`)+" svelte-qzwrll")&&$(t,"class",r),1&a&&n!==(n=$e(e[0],"tleft"))&&$(t,"style",n),4&a&&o!==(o=D(`${e[2]} handle handle-tright`)+" svelte-qzwrll")&&$(i,"class",o),1&a&&c!==(c=$e(e[0],"tright"))&&$(i,"style",c),4&a&&f!==(f=D(`${e[2]} handle handle-bleft`)+" svelte-qzwrll")&&$(d,"class",f),1&a&&h!==(h=$e(e[0],"bleft"))&&$(d,"style",h),4&a&&O!==(O=D(`${e[2]} handle handle-bright`)+" svelte-qzwrll")&&$(N,"class",O),1&a&&H!==(H=$e(e[0],"bright"))&&$(N,"style",H)},d(e){e&&L(t),e&&L(l),e&&L(i),e&&L(u),e&&L(d),e&&L(m),e&&L(N),R=!1,E(U)}}}function Ue(e){let t,a,s,r,n,l,i,o=e[0].active&&Re(e);return{c(){t=g("div"),r=v(),o&&o.c(),n=N(),this.h()},l(e){t=y(e,"DIV",{class:!0,draggable:!0,style:!0}),w(t).forEach(L),r=x(e),o&&o.l(e),n=N(),this.h()},h(){var r;$(t,"class",a=D(`frame ${e[2]}`)+" svelte-qzwrll"),$(t,"draggable","true"),$(t,"style",s=null==(r=e[0])?void 0:r.style)},m(a,s){T(a,t,s),T(a,r,s),o&&o.m(a,s),T(a,n,s),l||(i=[k(t,"dragover",e[9]),k(t,"dragstart",e[10]),k(t,"dragend",e[11])],l=!0)},p(e,[r]){var l;4&r&&a!==(a=D(`frame ${e[2]}`)+" svelte-qzwrll")&&$(t,"class",a),1&r&&s!==(s=null==(l=e[0])?void 0:l.style)&&$(t,"style",s),e[0].active?o?o.p(e,r):(o=Re(e),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:P,o:P,d(e){e&&L(t),e&&L(r),o&&o.d(e),e&&L(n),l=!1,E(i)}}}function ze(e,t,a){let{frame:s}=t,{frameList:r}=t,{addedClass:n=""}=t,l={x:0,y:0},i=[0,0],o=[0,0],c=` background-image: url('${null==s?void 0:s.url}');`;null==s||s.width,null==s||s.height,s.style=(null==s?void 0:s.style)+c;const u=e=>(e.dataTransfer.setData("frame id",s.id),e.dataTransfer.dropEffect="move",l.x=e.clientX,l.y=e.clientY,o=[s.x,s.y],a(3,i=[l.x-o[0],l.y-o[1]]),i),d=e=>(e.dataTransfer.getData("frame id"),l.x=e.pageX,l.y=e.pageY,o=[s.x,s.y],a(0,s.x=e.clientX-i[0],s),a(0,s.y=e.clientY-i[1],s),a(0,s.style=`width: ${s.width}px; height: ${s.height}px; position: fixed; left: ${s.x}px; top: ${s.y}px;`+c,s),a(0,s=Ne(s)),!1),f=(e,t)=>(e.dataTransfer.setData("frame id",s.id),l.x=e.clientX,l.y=e.clientY,o=[s.x,s.y],a(3,i=[l.x-s.x,l.y-s.y]),i),h=(e,t)=>{switch(e=e||window.event,console.log(e),l.x=e.movementX,l.y=e.movementY,t){case"bright":a(0,s.width=s.width+l.x,s),a(0,s.height=s.height+l.y,s),console.log(s.width,s.height);break;default:return}a(0,s=Ne(s))},m=O();function g(e,t,a){console.log("send"),m("message",{frame:e,event:t,edge:a})}return e.$$set=e=>{"frame"in e&&a(0,s=e.frame),"frameList"in e&&a(1,r=e.frameList),"addedClass"in e&&a(2,n=e.addedClass)},[s,r,n,i,u,d,f,h,g,e=>d(e),e=>{a(3,i=u(e))},e=>me(r),e=>{a(1,r=r.filter((e=>0==e.top)))},e=>a(3,i=f(e)),e=>a(3,i=f(e)),e=>a(3,i=f(e)),e=>h(e,"bleft"),e=>{g(s,e,"bright")}]}class Ae extends f{constructor(e){super(),h(this,e,ze,Ue,m,{frame:0,frameList:1,addedClass:2})}}function Me(e){let t,a,s,r,n,l,i,o,c,u,d,f;return{c(){t=g("section"),a=g("input"),s=v(),r=g("div"),n=g("button"),l=g("span"),i=p("add"),o=v(),c=g("span"),u=p("Add Image"),this.h()},l(e){t=y(e,"SECTION",{id:!0,class:!0});var d=w(t);a=y(d,"INPUT",{id:!0,placeholder:!0,"aria-placeholder":!0,class:!0}),s=x(d),r=y(d,"DIV",{id:!0,class:!0});var f=w(r);n=y(f,"BUTTON",{class:!0});var h=w(n);l=y(h,"SPAN",{class:!0});var m=w(l);i=b(m,"add"),m.forEach(L),o=x(h),c=y(h,"SPAN",{class:!0});var g=w(c);u=b(g,"Add Image"),g.forEach(L),h.forEach(L),f.forEach(L),d.forEach(L),this.h()},h(){$(a,"id","textInput"),$(a,"placeholder","Enter image URL"),$(a,"aria-placeholder","Enter image URL"),$(a,"class","svelte-b8i4gs"),$(l,"class","material-icons"),$(c,"class","button-text svelte-b8i4gs"),$(n,"class","svelte-b8i4gs"),$(r,"id","submit"),$(r,"class","svelte-b8i4gs"),$(t,"id","inputArea"),$(t,"class","svelte-b8i4gs")},m(h,m){T(h,t,m),I(t,a),H(a,e[0]),I(t,s),I(t,r),I(r,n),I(n,l),I(l,i),I(n,o),I(n,c),I(c,u),d||(f=[k(a,"input",e[5]),k(a,"keypress",(function(){R(e[1].bind(e[0]))&&e[1].bind(e[0]).apply(this,arguments)})),k(n,"mousedown",e[6]),k(t,"click",S(e[4]))],d=!0)},p(t,[s]){e=t,1&s&&a.value!==e[0]&&H(a,e[0])},i:P,o:P,d(e){e&&L(t),d=!1,E(f)}}}function je(e,t,a){var s=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))((function(r,n){function l(e){try{o(s.next(e))}catch(t){n(t)}}function i(e){try{o(s.throw(e))}catch(t){n(t)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}o((s=s.apply(e,t||[])).next())}))};let{frameList:r}=t,{userData:n}=t,l="";const i=e=>s(void 0,void 0,void 0,(function*(){if("enter"==e.key.toLowerCase()){let e=yield xe({userData:n,url:l,frameList:r});a(2,r=[...r,e]),a(2,r=He(e.id,r)),we(r),a(0,l="")}}));return e.$$set=e=>{"frameList"in e&&a(2,r=e.frameList),"userData"in e&&a(3,n=e.userData)},[l,i,r,n,function(t){U.call(this,e,t)},function(){l=this.value,a(0,l)},e=>{e.preventDefault(),i({key:"enter"})}]}class Je extends f{constructor(e){super(),h(this,e,je,Me,m,{frameList:2,userData:3})}}function Be(e){let t,a,s,r,n,l,i,o;function c(e,t){return e[7]?Fe:Ye}let u=c(e),d=u(e);return{c(){t=g("div"),s=v(),r=g("div"),d.c(),this.h()},l(e){t=y(e,"DIV",{class:!0}),w(t).forEach(L),s=x(e),r=y(e,"DIV",{class:!0});var a=w(r);d.l(a),a.forEach(L),this.h()},h(){$(t,"class","modal svelte-1ir4uwo"),$(r,"class","auth-dropdown svelte-1ir4uwo")},m(a,n){T(a,t,n),T(a,s,n),T(a,r,n),d.m(r,null),l=!0,i||(o=k(t,"click",e[9]),i=!0)},p(e,t){u===(u=c(e))&&d?d.p(e,t):(d.d(1),d=u(e),d&&(d.c(),d.m(r,null)))},i(e){l||(e&&z((()=>{a||(a=A(t,Y,{duration:100},!0)),a.run(1)})),e&&z((()=>{n||(n=A(r,Y,{duration:100},!0)),n.run(1)})),l=!0)},o(e){e&&(a||(a=A(t,Y,{duration:100},!1)),a.run(0)),e&&(n||(n=A(r,Y,{duration:100},!1)),n.run(0)),l=!1},d(e){e&&L(t),e&&a&&a.end(),e&&L(s),e&&L(r),d.d(),e&&n&&n.end(),i=!1,o()}}}function Ye(e){let t,a,s,r=e[4]&&Ve(e),n=e[5]&&Xe(e),l=e[6]&&qe(e);return{c(){r&&r.c(),t=v(),n&&n.c(),a=v(),l&&l.c(),s=N()},l(e){r&&r.l(e),t=x(e),n&&n.l(e),a=x(e),l&&l.l(e),s=N()},m(e,i){r&&r.m(e,i),T(e,t,i),n&&n.m(e,i),T(e,a,i),l&&l.m(e,i),T(e,s,i)},p(e,i){e[4]?r?r.p(e,i):(r=Ve(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),e[5]?n?n.p(e,i):(n=Xe(e),n.c(),n.m(a.parentNode,a)):n&&(n.d(1),n=null),e[6]?l?l.p(e,i):(l=qe(e),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(e){r&&r.d(e),e&&L(t),n&&n.d(e),e&&L(a),l&&l.d(e),e&&L(s)}}}function Fe(e){let t,a,s,r;return{c(){t=g("button"),a=p("Log Out"),this.h()},l(e){t=y(e,"BUTTON",{class:!0});var s=w(t);a=b(s,"Log Out"),s.forEach(L),this.h()},h(){$(t,"class","back-button svelte-1ir4uwo")},m(n,l){T(n,t,l),I(t,a),s||(r=k(t,"click",e[10]),s=!0)},p:P,d(e){e&&L(t),s=!1,r()}}}function Ve(e){let t,a,s,r,n,l,i;return{c(){t=g("button"),a=p("Log In"),s=v(),r=g("button"),n=p("Sign Up"),this.h()},l(e){t=y(e,"BUTTON",{class:!0});var l=w(t);a=b(l,"Log In"),l.forEach(L),s=x(e),r=y(e,"BUTTON",{class:!0});var i=w(r);n=b(i,"Sign Up"),i.forEach(L),this.h()},h(){$(t,"class","svelte-1ir4uwo"),$(r,"class","svelte-1ir4uwo")},m(o,c){T(o,t,c),I(t,a),T(o,s,c),T(o,r,c),I(r,n),l||(i=[k(t,"click",e[11]),k(r,"click",e[12])],l=!0)},p:P,d(e){e&&L(t),e&&L(s),e&&L(r),l=!1,E(i)}}}function Xe(e){let t,a,s,r,n,l,i,o,c,u,d,f,h,m,D,S,N,P,O,R,U,z,A,M,j;return{c(){t=g("form"),a=g("span"),s=p("Email"),r=v(),n=g("input"),l=v(),i=g("span"),o=p("Password"),c=v(),u=g("input"),d=v(),f=g("button"),h=p("Submit"),m=v(),D=g("p"),S=g("span"),N=p("Don't have an account?"),P=v(),O=g("a"),R=p("Sign up here."),U=v(),z=g("button"),A=p("Back"),this.h()},l(e){t=y(e,"FORM",{class:!0});var g=w(t);a=y(g,"SPAN",{class:!0});var p=w(a);s=b(p,"Email"),p.forEach(L),r=x(g),n=y(g,"INPUT",{class:!0}),l=x(g),i=y(g,"SPAN",{class:!0});var v=w(i);o=b(v,"Password"),v.forEach(L),c=x(g),u=y(g,"INPUT",{class:!0,type:!0}),d=x(g),f=y(g,"BUTTON",{class:!0});var $=w(f);h=b($,"Submit"),$.forEach(L),g.forEach(L),m=x(e),D=y(e,"P",{class:!0});var T=w(D);S=y(T,"SPAN",{});var I=w(S);N=b(I,"Don't have an account?"),I.forEach(L),P=x(T),O=y(T,"A",{href:!0});var k=w(O);R=b(k,"Sign up here."),k.forEach(L),T.forEach(L),U=x(e),z=y(e,"BUTTON",{class:!0});var E=w(z);A=b(E,"Back"),E.forEach(L),this.h()},h(){$(a,"class","left svelte-1ir4uwo"),$(n,"class","right svelte-1ir4uwo"),$(i,"class","left svelte-1ir4uwo"),$(u,"class","right svelte-1ir4uwo"),$(u,"type","password"),$(f,"class","span-both svelte-1ir4uwo"),f.value="submit",$(t,"class","span-both form svelte-1ir4uwo"),$(O,"href","#/"),$(D,"class","span-both svelte-1ir4uwo"),$(z,"class","back-button span-both svelte-1ir4uwo")},m(g,p){T(g,t,p),I(t,a),I(a,s),I(t,r),I(t,n),H(n,e[2]),I(t,l),I(t,i),I(i,o),I(t,c),I(t,u),H(u,e[1]),I(t,d),I(t,f),I(f,h),T(g,m,p),T(g,D,p),I(D,S),I(S,N),I(D,P),I(D,O),I(O,R),T(g,U,p),T(g,z,p),I(z,A),M||(j=[k(n,"input",e[13]),k(u,"input",e[14]),k(t,"submit",e[15]),k(O,"click",e[16]),k(z,"click",e[17])],M=!0)},p(e,t){4&t&&n.value!==e[2]&&H(n,e[2]),2&t&&u.value!==e[1]&&H(u,e[1])},d(e){e&&L(t),e&&L(m),e&&L(D),e&&L(U),e&&L(z),M=!1,E(j)}}}function qe(e){let t,a,s,r,n,l,i,o,c,u,d,f,h,m,D,S,N,P,O,R,U,z,A,M,j,J,B,Y,F,V;return{c(){t=g("form"),a=g("span"),s=p("Name"),r=v(),n=g("input"),l=v(),i=g("span"),o=p("Email"),c=v(),u=g("input"),d=v(),f=g("span"),h=p("Password"),m=v(),D=g("input"),S=v(),N=g("button"),P=p("Submit"),O=v(),R=g("p"),U=g("span"),z=p("Already have an account?"),A=v(),M=g("a"),j=p("Log in here."),J=v(),B=g("button"),Y=p("Back"),this.h()},l(e){t=y(e,"FORM",{class:!0});var g=w(t);a=y(g,"SPAN",{class:!0});var p=w(a);s=b(p,"Name"),p.forEach(L),r=x(g),n=y(g,"INPUT",{class:!0}),l=x(g),i=y(g,"SPAN",{class:!0});var v=w(i);o=b(v,"Email"),v.forEach(L),c=x(g),u=y(g,"INPUT",{class:!0}),d=x(g),f=y(g,"SPAN",{class:!0});var $=w(f);h=b($,"Password"),$.forEach(L),m=x(g),D=y(g,"INPUT",{class:!0,type:!0}),S=x(g),N=y(g,"BUTTON",{class:!0});var T=w(N);P=b(T,"Submit"),T.forEach(L),g.forEach(L),O=x(e),R=y(e,"P",{class:!0});var I=w(R);U=y(I,"SPAN",{});var k=w(U);z=b(k,"Already have an account?"),k.forEach(L),A=x(I),M=y(I,"A",{href:!0});var E=w(M);j=b(E,"Log in here."),E.forEach(L),I.forEach(L),J=x(e),B=y(e,"BUTTON",{class:!0});var H=w(B);Y=b(H,"Back"),H.forEach(L),this.h()},h(){$(a,"class","left svelte-1ir4uwo"),$(n,"class","right svelte-1ir4uwo"),$(i,"class","left svelte-1ir4uwo"),$(u,"class","right svelte-1ir4uwo"),$(f,"class","left svelte-1ir4uwo"),$(D,"class","right svelte-1ir4uwo"),$(D,"type","password"),$(N,"class","span-both svelte-1ir4uwo"),$(t,"class","span-both form svelte-1ir4uwo"),$(M,"href","#/"),$(R,"class","span-both svelte-1ir4uwo"),$(B,"class","back-button span-both svelte-1ir4uwo")},m(g,p){T(g,t,p),I(t,a),I(a,s),I(t,r),I(t,n),H(n,e[0]),I(t,l),I(t,i),I(i,o),I(t,c),I(t,u),H(u,e[2]),I(t,d),I(t,f),I(f,h),I(t,m),I(t,D),H(D,e[1]),I(t,S),I(t,N),I(N,P),T(g,O,p),T(g,R,p),I(R,U),I(U,z),I(R,A),I(R,M),I(M,j),T(g,J,p),T(g,B,p),I(B,Y),F||(V=[k(n,"input",e[18]),k(u,"input",e[19]),k(D,"input",e[20]),k(t,"submit",e[21]),k(M,"click",e[22]),k(B,"click",e[23])],F=!0)},p(e,t){1&t&&n.value!==e[0]&&H(n,e[0]),4&t&&u.value!==e[2]&&H(u,e[2]),2&t&&D.value!==e[1]&&H(D,e[1])},d(e){e&&L(t),e&&L(O),e&&L(R),e&&L(J),e&&L(B),F=!1,E(V)}}}function Ce(e){let t,a,s,r,n,l,i,o=e[3]&&Be(e);return{c(){t=g("div"),a=g("button"),s=p("Menu"),r=v(),o&&o.c(),n=N(),this.h()},l(e){t=y(e,"DIV",{id:!0,class:!0});var l=w(t);a=y(l,"BUTTON",{class:!0});var i=w(a);s=b(i,"Menu"),i.forEach(L),l.forEach(L),r=x(e),o&&o.l(e),n=N(),this.h()},h(){$(a,"class","svelte-1ir4uwo"),$(t,"id","auth-menu"),$(t,"class","svelte-1ir4uwo")},m(c,u){T(c,t,u),I(t,a),I(a,s),T(c,r,u),o&&o.m(c,u),T(c,n,u),l||(i=k(a,"click",e[8]),l=!0)},p(e,[t]){e[3]?o?(o.p(e,t),8&t&&M(o,1)):(o=Be(e),o.c(),M(o,1),o.m(n.parentNode,n)):o&&(j(),J(o,1,1,(()=>{o=null})),B())},i(e){M(o)},o(e){J(o)},d(e){e&&L(t),e&&L(r),o&&o.d(e),e&&L(n),l=!1,i()}}}function We(e,t,a){let s,r,n,l,i,o,c,u;ce.subscribe((e=>{a(7,u=e.loggedIn)}));return[s,r,n,l,i,o,c,u,()=>{a(3,l=!0),a(4,i=!0),a(5,o=!1),a(6,c=!1)},()=>{a(3,l=!1)},()=>{a(3,l=!1),a(5,o=!1),a(6,c=!1),a(4,i=!1),(async()=>{await ne.auth.signOut(),ce.update((()=>({loggedIn:!1,userData:null,sessionData:null}))),ae("refreshToken",null)})()},()=>{a(5,o=!0),a(6,c=!1),a(4,i=!1)},()=>{a(6,c=!0),a(5,o=!1),a(4,i=!1)},function(){n=this.value,a(2,n)},function(){r=this.value,a(1,r)},async e=>{e.preventDefault(),console.log(await(async e=>{const{user:t,session:a,error:s}=await ne.auth.signIn({password:e.password,email:e.email});return s||(le=!0,ie=t,oe=a,ae("refreshToken",a.refresh_token),await re(t),ce.update((()=>({loggedIn:!0,userData:ie,sessionData:oe})))),[t,a,s]})({name:s,email:n,password:r}))},()=>{a(5,o=!1),a(6,c=!0)},()=>{a(5,o=!1),a(4,i=!0)},function(){s=this.value,a(0,s)},function(){n=this.value,a(2,n)},function(){r=this.value,a(1,r)},async e=>{e.preventDefault(),console.log(await(async e=>{const{user:t,session:a,error:s}=await ne.auth.signUp({password:e.password,email:e.email});if(!s){le=!0,oe=a;const{user:t,error:s}=await ne.auth.update({data:{name:e.name}});s||(ie=t)}return[t,a,s]})({password:r,email:n}))},()=>{a(5,o=!0),a(6,c=!1)},()=>{a(6,c=!1),a(4,i=!0)}]}class Qe extends f{constructor(e){super(),h(this,e,We,Ce,m,{})}}function _e(e){let t,a;return{c(){t=g("span"),a=p("Welcome to Polyref. Sign up above to access your ref board from anywhere!")},l(e){t=y(e,"SPAN",{});var s=w(t);a=b(s,"Welcome to Polyref. Sign up above to access your ref board from anywhere!"),s.forEach(L)},m(e,s){T(e,t,s),I(t,a)},p:P,d(e){e&&L(t)}}}function Ke(e){let t,a,s;return{c(){t=g("span"),a=p("Welcome to Polyref! Logged in as: "),s=p(e[0])},l(r){t=y(r,"SPAN",{});var n=w(t);a=b(n,"Welcome to Polyref! Logged in as: "),s=b(n,e[0]),n.forEach(L)},m(e,r){T(e,t,r),I(t,a),I(t,s)},p(e,t){1&t&&F(s,e[0])},d(e){e&&L(t)}}}function Ze(e){let t,a,s,r,n,l;function i(e,t){return e[1]?Ke:_e}let o=i(e),c=o(e);return{c(){t=g("section"),a=g("div"),c.c(),s=v(),r=g("div"),n=g("span"),l=p("What is Polyref?"),this.h()},l(e){t=y(e,"SECTION",{id:!0,class:!0});var i=w(t);a=y(i,"DIV",{id:!0,class:!0});var o=w(a);c.l(o),o.forEach(L),s=x(i),r=y(i,"DIV",{id:!0,class:!0});var u=w(r);n=y(u,"SPAN",{});var d=w(n);l=b(d,"What is Polyref?"),d.forEach(L),u.forEach(L),i.forEach(L),this.h()},h(){$(a,"id","user-stuff"),$(a,"class","svelte-ag0xro"),$(r,"id","dock"),$(r,"class","svelte-ag0xro"),$(t,"id","statusbar"),$(t,"class","svelte-ag0xro")},m(e,i){T(e,t,i),I(t,a),c.m(a,null),I(t,s),I(t,r),I(r,n),I(n,l)},p(e,[t]){o===(o=i(e))&&c?c.p(e,t):(c.d(1),c=o(e),c&&(c.c(),c.m(a,null)))},i:P,o:P,d(e){e&&L(t),c.d()}}}function Ge(e,t,a){let s="",r=!1;return ce.subscribe((e=>{var t;a(0,s=null===(t=e.userData)||void 0===t?void 0:t.email),a(1,r=e.loggedIn)})),ue().then((e=>a(1,r=e))),[s,r]}class et extends f{constructor(e){super(),h(this,e,Ge,Ze,m,{})}}const{window:tt}=ee;function at(e,t,a){const s=e.slice();return s[37]=t[a],s[38]=t,s[39]=a,s}function st(e){let t,a,s=e[0],r=[];for(let l=0;l<s.length;l+=1)r[l]=lt(at(e,s,l));const n=e=>J(r[e],1,1,(()=>{r[e]=null}));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=N()},l(e){for(let t=0;t<r.length;t+=1)r[t].l(e);t=N()},m(e,s){for(let t=0;t<r.length;t+=1)r[t].m(e,s);T(e,t,s),a=!0},p(e,a){if(25&a[0]){let l;for(s=e[0],l=0;l<s.length;l+=1){const n=at(e,s,l);r[l]?(r[l].p(n,a),M(r[l],1)):(r[l]=lt(n),r[l].c(),M(r[l],1),r[l].m(t.parentNode,t))}for(j(),l=s.length;l<r.length;l+=1)n(l);B()}},i(e){if(!a){for(let e=0;e<s.length;e+=1)M(r[e]);a=!0}},o(e){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)J(r[t]);a=!1},d(e){q(r,e),e&&L(t)}}}function rt(e){var t,a;let s,r,n,l,i,o,c;function u(t){e[18](t)}let d={addedClass:`${1==(null==(t=e[37])?void 0:t.top)?"zindexMax":""} ${1==(null==(a=e[37])?void 0:a.active)?"active":""}`,frame:e[37]};function f(...t){return e[20](e[37],e[38],e[39],...t)}return void 0!==e[0]&&(d.frameList=e[0]),r=new Ae({props:d}),V.push((()=>X(r,"frameList",u))),r.$on("message",e[19]),{c(){s=g("div"),C(r.$$.fragment),l=v()},l(e){s=y(e,"DIV",{});var t=w(s);W(r.$$.fragment,t),l=x(t),t.forEach(L)},m(e,t){T(e,s,t),Q(r,s,null),I(s,l),i=!0,o||(c=k(s,"pointerdown",f),o=!0)},p(t,a){var s,l;e=t;const i={};1&a[0]&&(i.addedClass=`${1==(null==(s=e[37])?void 0:s.top)?"zindexMax":""} ${1==(null==(l=e[37])?void 0:l.active)?"active":""}`),1&a[0]&&(i.frame=e[37]),!n&&1&a[0]&&(n=!0,i.frameList=e[0],K((()=>n=!1))),r.$set(i)},i(e){i||(M(r.$$.fragment,e),i=!0)},o(e){J(r.$$.fragment,e),i=!1},d(e){e&&L(s),Z(r),o=!1,c()}}}function nt(e){let t,a=(e[0]=Oe(e[0]))+"";return{c(){t=p(a)},l(e){t=b(e,a)},m(e,a){T(e,t,a)},p(e,s){1&s[0]&&a!==(a=(e[0]=Oe(e[0]))+"")&&F(t,a)},i:P,o:P,d(e){e&&L(t)}}}function lt(e){let t,a,s,r;const n=[nt,rt],l=[];function i(e,t){return null==e[37]?0:1}return t=i(e),a=l[t]=n[t](e),{c(){a.c(),s=N()},l(e){a.l(e),s=N()},m(e,a){l[t].m(e,a),T(e,s,a),r=!0},p(e,r){let o=t;t=i(e),t===o?l[t].p(e,r):(j(),J(l[o],1,1,(()=>{l[o]=null})),B(),a=l[t],a?a.p(e,r):(a=l[t]=n[t](e),a.c()),M(a,1),a.m(s.parentNode,s))},i(e){r||(M(a),r=!0)},o(e){J(a),r=!1},d(e){l[t].d(e),e&&L(s)}}}function it(e){var t;let a,s,r,n,l,i,o,c,u,d,f,h,m;function p(t){e[16](t)}function b(t){e[17](t)}let D={};void 0!==e[0]&&(D.frameList=e[0]),void 0!==e[7]&&(D.userData=e[7]),s=new Je({props:D}),V.push((()=>X(s,"frameList",p))),V.push((()=>X(s,"userData",b))),i=new Qe({});let N=(null==(t=e[0])?void 0:t.length)>0&&st(e);return d=new et({}),{c(){a=g("main"),C(s.$$.fragment),l=v(),C(i.$$.fragment),o=v(),c=g("div"),N&&N.c(),u=v(),C(d.$$.fragment),this.h()},l(e){a=y(e,"MAIN",{class:!0});var t=w(a);W(s.$$.fragment,t),l=x(t),W(i.$$.fragment,t),o=x(t),c=y(t,"DIV",{id:!0,class:!0});var r=w(c);N&&N.l(r),r.forEach(L),u=x(t),W(d.$$.fragment,t),t.forEach(L),this.h()},h(){$(c,"id","dropzone"),$(c,"class","svelte-nrzq5w"),$(a,"class","svelte-nrzq5w")},m(t,r){T(t,a,r),Q(s,a,null),I(a,l),Q(i,a,null),I(a,o),I(a,c),N&&N.m(c,null),e[21](c),I(a,u),Q(d,a,null),f=!0,h||(m=[k(tt,"keydown",e[15]),k(c,"dragover",_(S(ot))),k(c,"drop",_(S(e[22]))),k(c,"paste",e[23]),k(c,"touchstart",e[24]),k(c,"touchmove",e[25]),k(c,"pointerdown",e[26]),k(c,"pointermove",e[27]),k(c,"pointerup",e[28])],h=!0)},p(e,t){var a;const l={};!r&&1&t[0]&&(r=!0,l.frameList=e[0],K((()=>r=!1))),!n&&128&t[0]&&(n=!0,l.userData=e[7],K((()=>n=!1))),s.$set(l),(null==(a=e[0])?void 0:a.length)>0?N?(N.p(e,t),1&t[0]&&M(N,1)):(N=st(e),N.c(),M(N,1),N.m(c,null)):N&&(j(),J(N,1,1,(()=>{N=null})),B())},i(e){f||(M(s.$$.fragment,e),M(i.$$.fragment,e),M(N),M(d.$$.fragment,e),f=!0)},o(e){J(s.$$.fragment,e),J(i.$$.fragment,e),J(N),J(d.$$.fragment,e),f=!1},d(t){t&&L(a),Z(s),Z(i),N&&N.d(),e[21](null),Z(d),h=!1,E(m)}}}const ot=e=>!1;function ct(e,t,a){var s=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))((function(r,n){function l(e){try{o(s.next(e))}catch(t){n(t)}}function i(e){try{o(s.throw(e))}catch(t){n(t)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}o((s=s.apply(e,t||[])).next())}))};let r,n,l,i,o=[],c={x:0,y:0},u=null,d="",f=!1;G((()=>s(void 0,void 0,void 0,(function*(){ce.subscribe((e=>s(void 0,void 0,void 0,(function*(){if(a(6,f=e.loggedIn),a(7,i=e.userData),f){console.log("did fetch");const{fetchedFrameList:t,error:a}=yield async function(e){const{data:t,error:a}=await te.storage.from("images").download(`${e.id}/frameData.txt`);if(a)return{fetchedFrameList:null,error:a};{const e=await t.text();try{return 0==e.length?(console.log(JSON.parse(e)),{fetchedFrameList:null,error:null}):{fetchedFrameList:JSON.parse(e),error:null}}catch(s){return{fetchedFrameList:null,error:s}}}}(e.userData);a?console.log(a):0!=t.length&&we(t)}})))),ve.subscribe((e=>s(void 0,void 0,void 0,(function*(){e?(a(0,r=e.framesSnapshot),a(0,r=r.map((e=>(e=Ne(e),Object.assign(Object.assign({},e),{style:$e(e)}))))),console.log(r),f&&(yield se(ie,r))):a(0,r=[])})))),a(5,l=window.localStorage),0==f&&(a(0,r=he(l,"frameList",r)),console.log(r),a(1,n=r?Te(r):[])),null!=r&&0!=(null==r?void 0:r.length)||(a(0,r=new Array),xe({userData:i,url:"https://c.pxhere.com/images/8c/33/1bb3e98042854d9eee207eb9facc-1622223.jpg!d",frameList:r}).then((e=>{e.x=50,e.y=100,e.style=$e(e),e=Ne(e),r.push(e),a(0,r=He(e.id,r)),we(r)}))),we(r),o=[{currentTrans:"",currentState:be(o,0,r),framesSnapshot:r}]}))));const h=(e,t)=>s(void 0,void 0,void 0,(function*(){if(console.log("dropped"),e.preventDefault(),e.dataTransfer.items){let t=e.dataTransfer.items[0].getAsFile();if(t&&t.type.includes("image")){let e=URL.createObjectURL(t),s=yield xe(e);s.x=50,s.y=100,s.style=$e(s),s=Ne(s),a(0,r=[...r,s]),we(r)}}if(!e.dataTransfer.getData("frame id")){let t=e.dataTransfer.getData("text"),s=yield xe(t);s.x=e.clientX,s.y=e.clientY,s.style=`position:fixed; left:${s.x}px; top:${s.y}px;`;let n=r;t&&(n=[...n,s]),n=He(s.id,n),a(0,r=n),we(r)}"move"==e.dataTransfer.dropEffect&&(console.log("moved"),e.dataTransfer.getData("frame id"),we(r))}));let m,g=!1,p=!1,v=1;const y=()=>{a(8,g=!0)},w=()=>{a(8,g=!1),a(3,u=null)};O();return[r,n,c,u,d,l,f,i,g,p,m,v,h,y,w,e=>{0==f&&a(7,i=null),ke({userData:i,event:e,frameList:r})},function(e){r=e,a(0,r)},function(e){i=e,a(7,i)},function(e){r=e,a(0,r)},e=>{var t,s;let r=e;a(3,u=null==(t=null==r?void 0:r.detail)?void 0:t.frame.id),a(4,d=null==(s=null==r?void 0:r.detail)?void 0:s.edge)},(e,t,s,n)=>{("touch"==n.pointerType&&n.isPrimary||"mouse"==n.pointerType)&&(a(0,t[s]=Ne(e),r),a(0,r=He(e.id,r)))},function(e){V[e?"unshift":"push"]((()=>{m=e,a(10,m)}))},e=>h(e),async e=>{try{Pe({userData:i,frameList:r,event:e,appStorage:l,loggedIn:f})}catch(t){console.log(t)}},e=>{if(e.preventDefault(),e.targetTouches.length>1)try{let t=e.targetTouches[0],s=e.targetTouches[1],l=Math.abs(t.clientX-s.clientX),i=Math.abs(t.clientY-s.clientY);a(11,v=Math.sqrt(l**2+i**2)),a(1,n=Te(r))}catch(t){console.log(t)}},e=>{var t;2==e.targetTouches.length&&a(0,r=function(e,t,a){t.preventDefault();const s={transfomScale:1,center:[200,200]},r=t.targetTouches[0],n=t.targetTouches[1],l=Math.abs(r.clientX-n.clientX),i=Math.abs(r.clientY-n.clientY);s.transfomScale=Math.sqrt(l**2+i**2);const o=s.transfomScale/a;return[...e].map((e=>(e.width*=o,e.height*=o,e.x*=o,e.y*=o,(e=Ne(e)).style=$e(e),e)))}(Te(n),e,v)),p&&1==(null==(t=null==e?void 0:e.changedTouches)?void 0:t.length)&&a(0,r=r.map((t=>t=Ee(e,t,t.offset))))},e=>{let t=e.target;"dropzone"==(null==t?void 0:t.id)?(("touch"==e.pointerType&&e.isPrimary||"mouse"==e.pointerType)&&a(0,r=De(r)),"touch"==e.pointerType&&(e.isPrimary?a(9,p=!0):a(9,p=!1)),"mouse"==e.pointerType&&a(9,p=!0),a(0,r=r.map((t=>(t.offset=[e.clientX-t.x,e.clientY-t.y],t))))):y()},e=>{1==g&&r[u]&&a(0,r[u]=function(e,t,a){let s=a[t];const r=s.x,n=(s.y,{x:0,y:0});switch(e.pointerType){case"touch":console.log(e),s.width=e.clientX-r,s.height=s.width/s.aspect;break;default:case"mouse":n.x=e.movementX,n.y=e.movementY,s.width+=n.x,s.height+=n.x/s.aspect,s.bottomRightHandle.x+=n.x,s.bottomRightHandle.y+=s.height}return s=Ne(s),s.style=$e(s),s}(e,u,r),r),p&&"mouse"===(null==e?void 0:e.pointerType)&&a(0,r=r.map((t=>t=Ee(e,t,t.offset))))},e=>{w(),a(9,p=!1),we(r),me(r)}]}class ut extends f{constructor(e){super(),h(this,e,ct,it,m,{},null,[-1,-1])}}export{ut as default};
