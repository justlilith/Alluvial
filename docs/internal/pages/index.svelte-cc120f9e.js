var t=Object.defineProperty,e=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(e,a,n)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,s=(t,e)=>{for(var a in e||(e={}))i.call(e,a)&&o(t,a,e[a]);if(n)for(var a of n(e))l.call(e,a)&&o(t,a,e[a]);return t},r=(t,n)=>e(t,a(n));import{C as c,S as d,i as h,s as u,e as f,t as g,k as p,c as m,a as v,g as y,d as b,n as x,b as w,J as $,f as L,H,K as T,L as k,M as R,l as D,I as S,N as E,O,P as I,Q as z,R as X,T as Y,x as A,u as N,w as P,U as j,j as M,m as U,o as V,V as C,W as K,v as J,A as W,X as B,r as _,h as q}from"../chunks/vendor-f97e69e6.js";let F;function Q(t){var e,a;e="frameList",a=t,F.setItem(e,JSON.stringify(a)),console.log("saved uwu ✨")}F=window.localStorage;let Z=0,G=[{currentTrans:"",currentState:"",framesSnapshot:[]}];const tt=c({currentTrans:"",currentState:"",framesSnapshot:[]});function et(){tt.update((()=>(Z+=1,Z===G.length&&(Z=G.length-1),G[Z])))}function at(t){Z+=1;const e=G,a=r(s({},e[Z-1]),{framesSnapshot:t});e.push(a),tt.update((()=>a))}const nt={width:20,height:20,x:0,y:0};function it(t,e){return new Promise(((a,n)=>{t||n();const i=e.length;let l={url:t,width:400,height:400,x:100,y:100,style:"",id:i,topLeftHandle:nt,topRightHandle:r(s({},nt),{x:380}),bottomRightHandle:r(s({},nt),{x:380,y:380}),bottomLeftHandle:r(s({},nt),{y:380}),top:!0,active:!0,aspect:0,offset:[0,0]};const o=new Image;o.src=l.url,o.onload=()=>{console.log(o.naturalHeight,o.naturalWidth),l.height=o.naturalHeight,l.width=o.naturalWidth,l.aspect=l.width/l.height,l=rt(l),l.style=lt(l),ut(l),a(l)}}))}function lt(t,e){let a,n="",i=t.width,l=t.height;if(e)switch(e){case"tleft":i=t.topLeftHandle.width,l=t.topLeftHandle.height,a=` top: ${t.topLeftHandle.y}px; left: ${t.topLeftHandle.x}px;`;break;case"tright":i=t.topRightHandle.width,l=t.topRightHandle.height,a=` top: ${t.topRightHandle.y}px; left: ${t.topRightHandle.x}px;`;break;case"bleft":i=t.bottomLeftHandle.width,l=t.bottomLeftHandle.height,a=` top: ${t.bottomLeftHandle.y}px; left: ${t.bottomLeftHandle.x}px;`;break;case"bright":i=t.bottomRightHandle.width,l=t.bottomRightHandle.height,a=` top: ${t.bottomRightHandle.y}px; left: ${t.bottomRightHandle.x}px;`;break;default:return}return n=`width: ${i}px; height: ${l}px; position: fixed;`,e||(n+=` background-image: url('${t.url}'); top: ${t.y}px; left: ${t.x}px;`),e&&(n+=a),n}function ot(t){return t.map((t=>r(s({},t),{active:!1})))}function st(t){return JSON.parse(JSON.stringify(t))}function rt(t){const e=t.width/t.height;let a=window.visualViewport.width/2,n=window.visualViewport.width/2;return t.width>t.height?n=a/e:a=n*e,console.log(a,n,e),r(s({},t),{width:a,height:n})}function ct(t,e){switch(t.key){case"a":t.ctrlKey&&(at(e=function(t){return t.map((t=>r(s({},t),{active:!0})))}(e)),Q(e));break;case"A":t.ctrlKey&&(at(e=ot(e)),Q(e));break;case"y":t.ctrlKey&&et();break;case"z":t.ctrlKey&&(console.log("reversing history uwu ✨"),tt.update((()=>0==Z?(Q([]),null):Z>0?(Z-=1,console.log(G[Z].framesSnapshot),Q(G[Z].framesSnapshot),G[Z]):void 0)));break;case"Z":t.ctrlKey&&(console.log("yay~"),et());break;case"Escape":at(e=ot(e)),Q(e);break;case"Delete":case"Backspace":at(e=e.filter((t=>0==t.active))),Q(e);break;case"ArrowLeft":at(e=dt(e,"left")),Q(e);break;case"ArrowRight":at(e=dt(e,"right")),Q(e);break;case"ArrowUp":at(e=dt(e,"up")),Q(e);break;case"ArrowDown":at(e=dt(e,"down")),Q(e)}if(e)return e}function dt(t,e){const a=40,n=function(t){return t.filter((t=>1==t.top))[0]}(t);switch(e){case"left":t[n.id].x=t[n.id].x-a-t[n.id].x%a,console.log(t[n.id].x);break;case"right":t[n.id].x=t[n.id].x+a-t[n.id].x%a;break;case"up":t[n.id].y=t[n.id].y-a-t[n.id].y%a;break;case"down":t[n.id].y=t[n.id].y+a-t[n.id].y%a}return ut(n),t[n.id].style=lt(n),t}function ht(t,e,a){if("mouse"===(null==t?void 0:t.pointerType)){const a={x:0,y:0};a.x=t.movementX,a.y=t.movementY,e.x+=a.x,e.y+=a.y}else e.x=t.changedTouches[0].clientX-a[0],e.y=t.changedTouches[0].clientY-a[1],console.log(a[0]);return(e=ut(e)).style=lt(e),e}function ut(t){return t.topLeftHandle.x=t.x,t.topLeftHandle.y=t.y,t.topRightHandle.x=t.x+t.width-t.topRightHandle.width,t.topRightHandle.y=t.y,t.bottomLeftHandle.x=t.x,t.bottomLeftHandle.y=t.y+t.height-t.bottomLeftHandle.height,t.bottomRightHandle.x=t.x+t.width-t.bottomRightHandle.width,t.bottomRightHandle.y=t.y+t.height-t.bottomRightHandle.height,t}function ft(t){return t.filter((t=>null!==t||void 0!==t))}function gt(t,e){return e.map((e=>e=e.id==t?r(s({},e),{top:!0,active:!0}):r(s({},e),{top:!1,active:!1})))}function pt(t){let e,a,n,i,l,o,s,r,c,d,h,u,D,S,E,O,I,z,X,Y;return{c(){e=f("div"),a=f("button"),n=g("Delete"),o=p(),s=f("div"),d=p(),h=f("div"),S=p(),E=f("div"),O=g("Resize"),this.h()},l(t){e=m(t,"DIV",{class:!0,draggable:!0,style:!0});var i=v(e);a=m(i,"BUTTON",{class:!0});var l=v(a);n=y(l,"Delete"),l.forEach(b),i.forEach(b),o=x(t),s=m(t,"DIV",{class:!0,draggable:!0,style:!0}),v(s).forEach(b),d=x(t),h=m(t,"DIV",{class:!0,draggable:!0,style:!0}),v(h).forEach(b),S=x(t),E=m(t,"DIV",{class:!0,style:!0});var r=v(E);O=y(r,"Resize"),r.forEach(b),this.h()},h(){w(a,"class","svelte-9ziagi"),w(e,"class",i=$(`${t[2]} handle handle-tleft`)+" svelte-9ziagi"),w(e,"draggable","true"),w(e,"style",l=lt(t[0],"tleft")),w(s,"class",r=$(`${t[2]} handle handle-tright`)+" svelte-9ziagi"),w(s,"draggable","true"),w(s,"style",c=lt(t[0],"tright")),w(h,"class",u=$(`${t[2]} handle handle-bleft`)+" svelte-9ziagi"),w(h,"draggable","true"),w(h,"style",D=lt(t[0],"bleft")),w(E,"class",I=$(`${t[2]} handle handle-bright`)+" svelte-9ziagi"),w(E,"style",z=lt(t[0],"bright"))},m(i,l){L(i,e,l),H(e,a),H(a,n),L(i,o,l),L(i,s,l),L(i,d,l),L(i,h,l),L(i,S,l),L(i,E,l),H(E,O),X||(Y=[T(a,"click",t[12]),T(e,"dragstart",t[13]),T(s,"dragstart",t[14]),T(h,"dragstart",t[15]),T(h,"dragover",k(t[16])),T(E,"pointerdown",t[17])],X=!0)},p(t,a){4&a&&i!==(i=$(`${t[2]} handle handle-tleft`)+" svelte-9ziagi")&&w(e,"class",i),1&a&&l!==(l=lt(t[0],"tleft"))&&w(e,"style",l),4&a&&r!==(r=$(`${t[2]} handle handle-tright`)+" svelte-9ziagi")&&w(s,"class",r),1&a&&c!==(c=lt(t[0],"tright"))&&w(s,"style",c),4&a&&u!==(u=$(`${t[2]} handle handle-bleft`)+" svelte-9ziagi")&&w(h,"class",u),1&a&&D!==(D=lt(t[0],"bleft"))&&w(h,"style",D),4&a&&I!==(I=$(`${t[2]} handle handle-bright`)+" svelte-9ziagi")&&w(E,"class",I),1&a&&z!==(z=lt(t[0],"bright"))&&w(E,"style",z)},d(t){t&&b(e),t&&b(o),t&&b(s),t&&b(d),t&&b(h),t&&b(S),t&&b(E),X=!1,R(Y)}}}function mt(t){let e,a,n,i,l,o,s,r=t[0].active&&pt(t);return{c(){e=f("div"),i=p(),r&&r.c(),l=D(),this.h()},l(t){e=m(t,"DIV",{class:!0,draggable:!0,style:!0}),v(e).forEach(b),i=x(t),r&&r.l(t),l=D(),this.h()},h(){var i;w(e,"class",a=$(`frame ${t[2]}`)+" svelte-9ziagi"),w(e,"draggable","true"),w(e,"style",n=null==(i=t[0])?void 0:i.style)},m(a,n){L(a,e,n),L(a,i,n),r&&r.m(a,n),L(a,l,n),o||(s=[T(e,"dragover",t[9]),T(e,"dragstart",t[10]),T(e,"dragend",t[11])],o=!0)},p(t,[i]){var o;4&i&&a!==(a=$(`frame ${t[2]}`)+" svelte-9ziagi")&&w(e,"class",a),1&i&&n!==(n=null==(o=t[0])?void 0:o.style)&&w(e,"style",n),t[0].active?r?r.p(t,i):(r=pt(t),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},i:S,o:S,d(t){t&&b(e),t&&b(i),r&&r.d(t),t&&b(l),o=!1,R(s)}}}function vt(t,e,a){let{frame:n}=e,{frameList:i}=e,{addedClass:l=""}=e,o={x:0,y:0},s=[0,0],r=[0,0],c=` background-image: url('${null==n?void 0:n.url}');`;null==n||n.width,null==n||n.height,n.style=(null==n?void 0:n.style)+c;const d=t=>(t.dataTransfer.setData("frame id",n.id),t.dataTransfer.dropEffect="move",o.x=t.clientX,o.y=t.clientY,r=[n.x,n.y],a(3,s=[o.x-r[0],o.y-r[1]]),s),h=t=>(t.dataTransfer.getData("frame id"),o.x=t.pageX,o.y=t.pageY,r=[n.x,n.y],a(0,n.x=t.clientX-s[0],n),a(0,n.y=t.clientY-s[1],n),a(0,n.style=`width: ${n.width}px; height: ${n.height}px; position: fixed; left: ${n.x}px; top: ${n.y}px;`+c,n),a(0,n=ut(n)),!1),u=(t,e)=>(t.dataTransfer.setData("frame id",n.id),o.x=t.clientX,o.y=t.clientY,r=[n.x,n.y],a(3,s=[o.x-n.x,o.y-n.y]),s),f=(t,e)=>{switch(t=t||window.event,console.log(t),o.x=t.movementX,o.y=t.movementY,e){case"bright":a(0,n.width=n.width+o.x,n),a(0,n.height=n.height+o.y,n),console.log(n.width,n.height);break;default:return}a(0,n=ut(n))},g=E();function p(t,e,a){console.log("send"),g("message",{frame:t,event:e,edge:a})}return t.$$set=t=>{"frame"in t&&a(0,n=t.frame),"frameList"in t&&a(1,i=t.frameList),"addedClass"in t&&a(2,l=t.addedClass)},[n,i,l,s,d,h,u,f,p,t=>h(t),t=>{a(3,s=d(t))},t=>Q(i),t=>{a(1,i=i.filter((t=>0==t.top)))},t=>a(3,s=u(t)),t=>a(3,s=u(t)),t=>a(3,s=u(t)),t=>f(t,"bleft"),t=>{p(n,t,"bright")}]}class yt extends d{constructor(t){super(),h(this,t,vt,mt,u,{frame:0,frameList:1,addedClass:2})}}function bt(t){let e,a,n,i,l,o,s,r,c,d,h,u;return{c(){e=f("section"),a=f("input"),n=p(),i=f("div"),l=f("button"),o=f("span"),s=g("add"),r=p(),c=f("span"),d=g("Add Image"),this.h()},l(t){e=m(t,"SECTION",{id:!0,class:!0});var h=v(e);a=m(h,"INPUT",{id:!0,placeholder:!0,"aria-placeholder":!0,class:!0}),n=x(h),i=m(h,"DIV",{id:!0,class:!0});var u=v(i);l=m(u,"BUTTON",{class:!0});var f=v(l);o=m(f,"SPAN",{class:!0});var g=v(o);s=y(g,"add"),g.forEach(b),r=x(f),c=m(f,"SPAN",{class:!0});var p=v(c);d=y(p,"Add Image"),p.forEach(b),f.forEach(b),u.forEach(b),h.forEach(b),this.h()},h(){w(a,"id","textInput"),w(a,"placeholder","Enter image URL"),w(a,"aria-placeholder","Enter image URL"),w(a,"class","svelte-b8i4gs"),w(o,"class","material-icons"),w(c,"class","button-text svelte-b8i4gs"),w(l,"class","svelte-b8i4gs"),w(i,"id","submit"),w(i,"class","svelte-b8i4gs"),w(e,"id","inputArea"),w(e,"class","svelte-b8i4gs")},m(f,g){L(f,e,g),H(e,a),O(a,t[0]),H(e,n),H(e,i),H(i,l),H(l,o),H(o,s),H(l,r),H(l,c),H(c,d),h||(u=[T(a,"input",t[4]),T(a,"keypress",(function(){I(t[1].bind(t[0]))&&t[1].bind(t[0]).apply(this,arguments)})),T(l,"mousedown",t[5]),T(e,"click",k(t[3]))],h=!0)},p(e,[n]){t=e,1&n&&a.value!==t[0]&&O(a,t[0])},i:S,o:S,d(t){t&&b(e),h=!1,R(u)}}}function xt(t,e,a){var n=this&&this.__awaiter||function(t,e,a,n){return new(a||(a=Promise))((function(i,l){function o(t){try{r(n.next(t))}catch(e){l(e)}}function s(t){try{r(n.throw(t))}catch(e){l(e)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(o,s)}r((n=n.apply(t,e||[])).next())}))};let{frameList:i}=e,l="";const o=t=>n(void 0,void 0,void 0,(function*(){if("enter"==t.key.toLowerCase()){let t=yield it(l,i);a(2,i=[...i,t]),a(2,i=gt(t.id,i)),a(0,l="")}}));return t.$$set=t=>{"frameList"in t&&a(2,i=t.frameList)},[l,o,i,function(e){z.call(this,t,e)},function(){l=this.value,a(0,l)},t=>{t.preventDefault(),o({key:"enter"})}]}class wt extends d{constructor(t){super(),h(this,t,xt,bt,u,{frameList:2})}}const{window:$t}=B;function Lt(t,e,a){const n=t.slice();return n[34]=e[a],n[35]=e,n[36]=a,n}function Ht(t){let e,a,n=t[0],i=[];for(let o=0;o<n.length;o+=1)i[o]=Rt(Lt(t,n,o));const l=t=>N(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=D()},l(t){for(let e=0;e<i.length;e+=1)i[e].l(t);e=D()},m(t,n){for(let e=0;e<i.length;e+=1)i[e].m(t,n);L(t,e,n),a=!0},p(t,a){if(25&a[0]){let o;for(n=t[0],o=0;o<n.length;o+=1){const l=Lt(t,n,o);i[o]?(i[o].p(l,a),A(i[o],1)):(i[o]=Rt(l),i[o].c(),A(i[o],1),i[o].m(e.parentNode,e))}for(_(),o=n.length;o<i.length;o+=1)l(o);P()}},i(t){if(!a){for(let t=0;t<n.length;t+=1)A(i[t]);a=!0}},o(t){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)N(i[e]);a=!1},d(t){j(i,t),t&&b(e)}}}function Tt(t){var e,a;let n,i,l,o,s,r,c;function d(e){t[15](e)}let h={addedClass:`${1==(null==(e=t[34])?void 0:e.top)?"zindexMax":""} ${1==(null==(a=t[34])?void 0:a.active)?"active":""}`,frame:t[34]};function u(...e){return t[17](t[34],t[35],t[36],...e)}return void 0!==t[0]&&(h.frameList=t[0]),i=new yt({props:h}),X.push((()=>Y(i,"frameList",d))),i.$on("message",t[16]),{c(){n=f("div"),M(i.$$.fragment),o=p()},l(t){n=m(t,"DIV",{});var e=v(n);U(i.$$.fragment,e),o=x(e),e.forEach(b)},m(t,e){L(t,n,e),V(i,n,null),H(n,o),s=!0,r||(c=T(n,"pointerdown",u),r=!0)},p(e,a){var n,o;t=e;const s={};1&a[0]&&(s.addedClass=`${1==(null==(n=t[34])?void 0:n.top)?"zindexMax":""} ${1==(null==(o=t[34])?void 0:o.active)?"active":""}`),1&a[0]&&(s.frame=t[34]),!l&&1&a[0]&&(l=!0,s.frameList=t[0],K((()=>l=!1))),i.$set(s)},i(t){s||(A(i.$$.fragment,t),s=!0)},o(t){N(i.$$.fragment,t),s=!1},d(t){t&&b(n),J(i),r=!1,c()}}}function kt(t){let e,a=(t[0]=ft(t[0]))+"";return{c(){e=g(a)},l(t){e=y(t,a)},m(t,a){L(t,e,a)},p(t,n){1&n[0]&&a!==(a=(t[0]=ft(t[0]))+"")&&q(e,a)},i:S,o:S,d(t){t&&b(e)}}}function Rt(t){let e,a,n,i;const l=[kt,Tt],o=[];function s(t,e){return null==t[34]?0:1}return e=s(t),a=o[e]=l[e](t),{c(){a.c(),n=D()},l(t){a.l(t),n=D()},m(t,a){o[e].m(t,a),L(t,n,a),i=!0},p(t,i){let r=e;e=s(t),e===r?o[e].p(t,i):(_(),N(o[r],1,1,(()=>{o[r]=null})),P(),a=o[e],a?a.p(t,i):(a=o[e]=l[e](t),a.c()),A(a,1),a.m(n.parentNode,n))},i(t){i||(A(a),i=!0)},o(t){N(a),i=!1},d(t){o[e].d(t),t&&b(n)}}}function Dt(t){var e;let a,n,i,l,o,s,r,c;function d(e){t[14](e)}let h={};void 0!==t[0]&&(h.frameList=t[0]),n=new wt({props:h}),X.push((()=>Y(n,"frameList",d)));let u=(null==(e=t[0])?void 0:e.length)>0&&Ht(t);return{c(){a=f("main"),M(n.$$.fragment),l=p(),o=f("div"),u&&u.c(),this.h()},l(t){a=m(t,"MAIN",{class:!0});var e=v(a);U(n.$$.fragment,e),l=x(e),o=m(e,"DIV",{id:!0,class:!0});var i=v(o);u&&u.l(i),i.forEach(b),e.forEach(b),this.h()},h(){w(o,"id","dropzone"),w(o,"class","svelte-l1nbwt"),w(a,"class","svelte-l1nbwt")},m(e,i){L(e,a,i),V(n,a,null),H(a,l),H(a,o),u&&u.m(o,null),t[18](o),s=!0,r||(c=[T($t,"keydown",t[13]),T(o,"dragover",C(k(St))),T(o,"drop",C(k(t[19]))),T(o,"paste",t[20]),T(o,"touchstart",t[21]),T(o,"touchmove",t[22]),T(o,"pointerdown",t[23]),T(o,"pointermove",t[24]),T(o,"pointerup",t[25])],r=!0)},p(t,e){var a;const l={};!i&&1&e[0]&&(i=!0,l.frameList=t[0],K((()=>i=!1))),n.$set(l),(null==(a=t[0])?void 0:a.length)>0?u?(u.p(t,e),1&e[0]&&A(u,1)):(u=Ht(t),u.c(),A(u,1),u.m(o,null)):u&&(_(),N(u,1,1,(()=>{u=null})),P())},i(t){s||(A(n.$$.fragment,t),A(u),s=!0)},o(t){N(n.$$.fragment,t),N(u),s=!1},d(e){e&&b(a),J(n),u&&u.d(),t[18](null),r=!1,R(c)}}}const St=t=>!1;function Et(t,e,a){var n=this&&this.__awaiter||function(t,e,a,n){return new(a||(a=Promise))((function(i,l){function o(t){try{r(n.next(t))}catch(e){l(e)}}function s(t){try{r(n.throw(t))}catch(e){l(e)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(o,s)}r((n=n.apply(t,e||[])).next())}))};let i,l,o,s,r,c={x:0,y:0};W((()=>n(void 0,void 0,void 0,(function*(){r=window.localStorage,a(0,i=function(t,e,a){let n=null;try{if(n=JSON.parse(t.getItem(e)),""==n)throw new Error("Smile empty soul")}catch(i){console.warn(i),n=a}finally{return n}}(r,"frameList",i)),console.log(i),a(1,l=st(i)),null!=i&&0!=(null==i?void 0:i.length)||(a(0,i=new Array),it("https://c.pxhere.com/images/8c/33/1bb3e98042854d9eee207eb9facc-1622223.jpg!d",i).then((t=>{t.x=50,t.y=100,t.style=lt(t),t=ut(t),i.push(t),a(0,i=gt(t.id,i))}))),at(i),tt.subscribe((t=>{t?(a(0,i=t.framesSnapshot),a(0,i=i.map((t=>(t=ut(t),Object.assign(Object.assign({},t),{style:lt(t)})))))):a(0,i=[])}))}))));const d=(t,e)=>n(void 0,void 0,void 0,(function*(){if(console.log("dropped"),t.preventDefault(),t.dataTransfer.items){let e=t.dataTransfer.items[0].getAsFile();if(e&&e.type.includes("image")){let t=URL.createObjectURL(e),n=yield it(t,i);n.x=50,n.y=100,n.style=lt(n),n=ut(n),a(0,i=[...i,n]),at(i)}}if(!t.dataTransfer.getData("frame id")){let e=t.dataTransfer.getData("text"),n=yield it(e,i);n.x=t.clientX,n.y=t.clientY,n.style=`position:fixed; left:${n.x}px; top:${n.y}px;`;let l=i;e&&(l=[...l,n]),l=gt(n.id,l),a(0,i=l),at(i)}"move"==t.dataTransfer.dropEffect&&(console.log("moved"),t.dataTransfer.getData("frame id"),at(i))})),h=t=>n(void 0,void 0,void 0,(function*(){var e,n;let l=null===(e=null==t?void 0:t.clipboardData)||void 0===e?void 0:e.items[0].getAsFile(),o=null===(n=null==t?void 0:t.clipboardData)||void 0===n?void 0:n.getData("text");l&&(o=URL.createObjectURL(l));let s=yield it(o,i);s.x=50,s.y=100,s.style=`position:fixed; left:${s.x}px; top:${s.y}px;`;let r=new Image;r.src=o,r.onload=()=>{console.log(r.naturalHeight,r.naturalWidth),s.height=r.naturalHeight,s.width=r.naturalWidth,s=rt(s),s.style=lt(s),ut(s),o&&a(0,i=[...i,s]),a(0,i=gt(s.id,i)),console.log(i.filter((t=>t.id==s.id))),at(i)}}));let u,f=!1,g=!1,p=1;const m=()=>{a(5,f=!0)},v=()=>{a(5,f=!1),a(3,o=null)};E();return[i,l,c,o,s,f,g,u,p,d,h,m,v,t=>{ct(t,i)},function(t){i=t,a(0,i)},function(t){i=t,a(0,i)},t=>{var e,n;let i=t;a(3,o=null==(e=null==i?void 0:i.detail)?void 0:e.frame.id),a(4,s=null==(n=null==i?void 0:i.detail)?void 0:n.edge)},(t,e,n,l)=>{("touch"==l.pointerType&&l.isPrimary||"mouse"==l.pointerType)&&(a(0,e[n]=ut(t),i),a(0,i=gt(t.id,i)))},function(t){X[t?"unshift":"push"]((()=>{u=t,a(7,u)}))},t=>d(t),t=>h(t),t=>{if(t.preventDefault(),t.targetTouches.length>1)try{let e=t.targetTouches[0],n=t.targetTouches[1],o=Math.abs(e.clientX-n.clientX),s=Math.abs(e.clientY-n.clientY);a(8,p=Math.sqrt(o**2+s**2)),a(1,l=st(i))}catch(e){console.log(e)}},t=>{var e;2==t.targetTouches.length&&a(0,i=function(t,e,a){e.preventDefault();const n={transfomScale:1,center:[200,200]},i=e.targetTouches[0],l=e.targetTouches[1];Math.abs(i.clientX+l.clientX),Math.abs(i.clientY+l.clientY);const o=Math.abs(i.clientX-l.clientX),s=Math.abs(i.clientY-l.clientY);n.transfomScale=Math.sqrt(o**2+s**2);const r=n.transfomScale/a;return[...t].map((t=>(t.width*=r,t.height*=r,t.x*=r,t.y*=r,(t=ut(t)).style=lt(t),t)))}(st(l),t,p)),g&&1==(null==(e=null==t?void 0:t.changedTouches)?void 0:e.length)&&a(0,i=i.map((e=>e=ht(t,e,e.offset))))},t=>{let e=t.target;"dropzone"==(null==e?void 0:e.id)?(("touch"==t.pointerType&&t.isPrimary||"mouse"==t.pointerType)&&a(0,i=ot(i)),"touch"==t.pointerType&&(t.isPrimary?a(6,g=!0):a(6,g=!1)),"mouse"==t.pointerType&&a(6,g=!0),a(0,i=i.map((e=>(e.offset=[t.clientX-e.x,t.clientY-e.y],e))))):m()},t=>{1==f&&i[o]&&a(0,i[o]=function(t,e,a,n){let i=a[e];const l=i.x,o=(i.y,{x:0,y:0});switch(t.pointerType){case"touch":console.log(t),i.width=t.clientX-l,i.height=i.width/i.aspect;break;default:case"mouse":o.x=t.movementX,o.y=t.movementY,i.width+=o.x,i.height+=o.x/i.aspect,i.bottomRightHandle.x+=o.x,i.bottomRightHandle.y+=i.height}return i=ut(i),i.style=lt(i),i}(t,o,i),i),g&&"mouse"===(null==t?void 0:t.pointerType)&&a(0,i=i.map((e=>e=ht(t,e,e.offset))))},t=>{v(),a(6,g=!1),at(i),Q(i)}]}class Ot extends d{constructor(t){super(),h(this,t,Et,Dt,u,{},null,[-1,-1])}}export{Ot as default};
