var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function l(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t){return null==t?"":t}function r(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function h(){return f(" ")}function u(){return f("")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t){return function(e){return e.preventDefault(),t.call(this,e)}}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let x;function b(t){x=t}function y(){const t=function(){if(!x)throw new Error("Function called outside component initialization");return x}();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const l=function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(e,n);o.slice().forEach((e=>{e.call(t,l)}))}}}const $=[],H=[],v=[],w=[],R=Promise.resolve();let L=!1;function k(t){v.push(t)}let _=!1;const j=new Set;function E(){if(!_){_=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];b(e),O(e.$$)}for(b(null),$.length=0;H.length;)H.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];j.has(e)||(j.add(e),e())}v.length=0}while($.length);for(;w.length;)w.pop()();L=!1,_=!1,j.clear()}}function O(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(k)}}const D=new Set;let C;function T(){C={r:0,c:[],p:C}}function N(){C.r||o(C.c),C=C.p}function X(t,e){t&&t.i&&(D.delete(t),t.i(e))}function Y(t,e,n,o){if(t&&t.o){if(D.has(t))return;D.add(t),C.c.push((()=>{D.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function S(t,n,a,i){const{fragment:r,on_mount:d,on_destroy:s,after_update:c}=t.$$;r&&r.m(n,a),i||k((()=>{const n=d.map(e).filter(l);s?s.push(...n):o(n),t.$$.on_mount=[]})),c.forEach(k)}function z(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function A(t,e){-1===t.$$.dirty[0]&&($.push(t),L||(L=!0,R.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(e,l,a,i,r,d,c,f=[-1]){const h=x;b(e);const u=e.$$={fragment:null,ctx:null,props:d,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:l.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:l.target||h.$$.root};c&&c(u.root);let g=!1;if(u.ctx=a?a(e,l.props||{},((t,n,...o)=>{const l=o.length?o[0]:n;return u.ctx&&r(u.ctx[t],u.ctx[t]=l)&&(!u.skip_bound&&u.bound[t]&&u.bound[t](l),g&&A(e,t)),n})):[],u.update(),g=!0,o(u.before_update),u.fragment=!!i&&i(u.ctx),l.target){if(l.hydrate){const t=function(t){return Array.from(t.childNodes)}(l.target);u.fragment&&u.fragment.l(t),t.forEach(s)}else u.fragment&&u.fragment.c();l.intro&&X(e.$$.fragment),S(e,l.target,l.anchor,l.customElement),E()}b(h)}class B{$destroy(){z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function I(t){let e,n,l,a,u,x,b,y,$,H,v,w,R,L,k,_,j,E,O;return{c(){e=c("div"),n=c("button"),n.textContent="Delete",u=h(),x=c("div"),$=h(),H=c("div"),R=h(),L=c("div"),k=f("Resize"),m(n,"class","svelte-178caft"),m(e,"class",l=i(`${t[1]} handle handle-tleft`)+" svelte-178caft"),m(e,"draggable","true"),m(e,"style",a=t[7](t[0],"tleft")),m(x,"class",b=i(`${t[1]} handle handle-tright`)+" svelte-178caft"),m(x,"draggable","true"),m(x,"style",y=t[7](t[0],"tright")),m(H,"class",v=i(`${t[1]} handle handle-bleft`)+" svelte-178caft"),m(H,"draggable","true"),m(H,"style",w=t[7](t[0],"bleft")),m(L,"class",_=i(`${t[1]} handle handle-bright`)+" svelte-178caft"),m(L,"style",j=t[7](t[0],"bright"))},m(o,l){d(o,e,l),r(e,n),d(o,u,l),d(o,x,l),d(o,$,l),d(o,H,l),d(o,R,l),d(o,L,l),r(L,k),E||(O=[g(e,"dragstart",t[11]),g(x,"dragstart",t[12]),g(H,"dragstart",t[13]),g(H,"dragover",p(t[14])),g(L,"mousedown",t[15])],E=!0)},p(t,n){2&n&&l!==(l=i(`${t[1]} handle handle-tleft`)+" svelte-178caft")&&m(e,"class",l),1&n&&a!==(a=t[7](t[0],"tleft"))&&m(e,"style",a),2&n&&b!==(b=i(`${t[1]} handle handle-tright`)+" svelte-178caft")&&m(x,"class",b),1&n&&y!==(y=t[7](t[0],"tright"))&&m(x,"style",y),2&n&&v!==(v=i(`${t[1]} handle handle-bleft`)+" svelte-178caft")&&m(H,"class",v),1&n&&w!==(w=t[7](t[0],"bleft"))&&m(H,"style",w),2&n&&_!==(_=i(`${t[1]} handle handle-bright`)+" svelte-178caft")&&m(L,"class",_),1&n&&j!==(j=t[7](t[0],"bright"))&&m(L,"style",j)},d(t){t&&s(e),t&&s(u),t&&s(x),t&&s($),t&&s(H),t&&s(R),t&&s(L),E=!1,o(O)}}}function M(e){let n,l,a,r,f,p,x,b=e[0].top&&I(e);return{c(){n=c("div"),r=h(),b&&b.c(),f=u(),m(n,"class",l=i(`frame ${e[1]}`)+" svelte-178caft"),m(n,"draggable","true"),m(n,"style",a=e[0].style)},m(t,o){d(t,n,o),d(t,r,o),b&&b.m(t,o),d(t,f,o),p||(x=[g(n,"dragover",e[9]),g(n,"dragstart",e[10])],p=!0)},p(t,[e]){2&e&&l!==(l=i(`frame ${t[1]}`)+" svelte-178caft")&&m(n,"class",l),1&e&&a!==(a=t[0].style)&&m(n,"style",a),t[0].top?b?b.p(t,e):(b=I(t),b.c(),b.m(f.parentNode,f)):b&&(b.d(1),b=null)},i:t,o:t,d(t){t&&s(n),t&&s(r),b&&b.d(t),t&&s(f),p=!1,o(x)}}}function F(t){return t.topLeftHandle.x=t.x,t.topLeftHandle.y=t.y,t.topRightHandle.x=t.x+t.width-t.topRightHandle.width,t.topRightHandle.y=t.y,t.bottomLeftHandle.x=t.x,t.bottomLeftHandle.y=t.y+t.height-t.bottomLeftHandle.height,t.bottomRightHandle.x=t.x+t.width-t.bottomRightHandle.width,t.bottomRightHandle.y=t.y+t.height-t.bottomRightHandle.height,t}function J(t,e,n){let{frame:o}=e,{addedClass:l=""}=e,a={x:0,y:0},i=[0,0],r=[0,0],d=` background-image: url('${o.url}');`;o.width,o.height,o.style=o.style+d;const s=t=>(t.dataTransfer.setData("frame id",o.id),t.dataTransfer.dropEffect="move",a.x=t.clientX,a.y=t.clientY,r=[o.x,o.y],n(2,i=[a.x-r[0],a.y-r[1]]),i),c=t=>(t.dataTransfer.getData("frame id"),a.x=t.pageX,a.y=t.pageY,r=[o.x,o.y],n(0,o.x=t.clientX-i[0],o),n(0,o.y=t.clientY-i[1],o),n(0,o.style=`width: ${o.width}px; height: ${o.height}px; position: fixed; left: ${o.x}px; top: ${o.y}px;`+d,o),n(0,o=F(o)),!1),f=(t,e)=>(t.dataTransfer.setData("frame id",o.id),a.x=t.clientX,a.y=t.clientY,r=[o.x,o.y],n(2,i=[a.x-o.x,a.y-o.y]),i),h=(t,e)=>{switch(t=t||window.event,console.log(t),a.x=t.movementX,a.y=t.movementY,e){case"bright":n(0,o.width=o.width+a.x,o),n(0,o.height=o.height+a.y,o),console.log(o.width,o.height);break;default:return}n(0,o=F(o))},u=y();function g(t,e,n){console.log("send"),u("message",{frame:t,event:e,edge:n})}return t.$$set=t=>{"frame"in t&&n(0,o=t.frame),"addedClass"in t&&n(1,l=t.addedClass)},[o,l,i,s,c,f,h,(t,e)=>{let n,o="",l=t.topRightHandle.x+t.topRightHandle.width-t.topLeftHandle.x,a=t.bottomLeftHandle.y+t.bottomLeftHandle.height-t.topLeftHandle.y;if(e)switch(e){case"tleft":l=t.topLeftHandle.width,a=t.topLeftHandle.height,n=` top: ${t.topLeftHandle.y}px; left: ${t.topLeftHandle.x}px;`;break;case"tright":l=t.topRightHandle.width,a=t.topRightHandle.height,n=` top: ${t.topRightHandle.y}px; left: ${t.topRightHandle.x}px;`;break;case"bleft":l=t.bottomLeftHandle.width,a=t.bottomLeftHandle.height,n=` top: ${t.bottomLeftHandle.y}px; left: ${t.bottomLeftHandle.x}px;`;break;case"bright":l=t.bottomRightHandle.width,a=t.bottomRightHandle.height,n=` top: ${t.bottomRightHandle.y}px; left: ${t.bottomRightHandle.x}px;`;break;default:return}return o=`width: ${l}px; height: ${a}px; position: fixed;`,e||(o+=` background-image: url('${t.url}'); top: ${t.y}px; left: ${t.x}px;`),e&&(o+=n),o},g,t=>c(t),t=>{n(2,i=s(t))},t=>n(2,i=f(t)),t=>n(2,i=f(t)),t=>n(2,i=f(t)),t=>h(t,"bleft"),t=>{g(o,t,"bright")}]}class U extends B{constructor(t){super(),q(this,t,J,M,a,{frame:0,addedClass:1})}}let P=window.localStorage;function G(t){var e,n;console.log("saving. . ."),e="frameList",n=t,P.setItem(e,JSON.stringify(n))}function K(t,e,n){const o=t.slice();return o[33]=e[n],o}function Q(t){let e,n,o=t[0],l=[];for(let e=0;e<o.length;e+=1)l[e]=V(K(t,o,e));const a=t=>Y(l[t],1,1,(()=>{l[t]=null}));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=u()},m(t,o){for(let e=0;e<l.length;e+=1)l[e].m(t,o);d(t,e,o),n=!0},p(t,n){if(525&n[0]){let i;for(o=t[0],i=0;i<o.length;i+=1){const a=K(t,o,i);l[i]?(l[i].p(a,n),X(l[i],1)):(l[i]=V(a),l[i].c(),X(l[i],1),l[i].m(e.parentNode,e))}for(T(),i=o.length;i<l.length;i+=1)a(i);N()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)X(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)Y(l[t]);n=!1},d(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(l,t),t&&s(e)}}}function V(t){let e,n,o,l,a,i;function f(){return t[15](t[33])}return n=new U({props:{addedClass:1==t[33].top?"zindexMax":"",frame:t[33]}}),n.$on("click",(function(){return t[13](t[33])})),n.$on("message",t[14]),{c(){var t;e=c("div"),(t=n.$$.fragment)&&t.c(),o=h()},m(t,s){d(t,e,s),S(n,e,null),r(e,o),l=!0,a||(i=g(e,"click",f),a=!0)},p(e,o){t=e;const l={};1&o[0]&&(l.addedClass=1==t[33].top?"zindexMax":""),1&o[0]&&(l.frame=t[33]),n.$set(l)},i(t){l||(X(n.$$.fragment,t),l=!0)},o(t){Y(n.$$.fragment,t),l=!1},d(t){t&&s(e),z(n),a=!1,i()}}}function W(t){let e,n,l,a,i,f=0!==t[0].length&&Q(t);return{c(){e=c("main"),n=c("div"),f&&f.c(),m(n,"id","dropzone"),m(n,"class","svelte-woq6ej"),m(e,"class","svelte-woq6ej")},m(o,s){d(o,e,s),r(e,n),f&&f.m(n,null),l=!0,a||(i=[g(window,"keyup",t[12]),g(n,"mouseup",t[16]),g(n,"mousedown",t[17]),g(n,"dragover",Z),g(n,"drop",p(t[18])),g(n,"paste",t[19]),g(n,"mousemove",t[20])],a=!0)},p(t,e){0!==t[0].length?f?(f.p(t,e),1&e[0]&&X(f,1)):(f=Q(t),f.c(),X(f,1),f.m(n,null)):f&&(T(),Y(f,1,1,(()=>{f=null})),N())},i(t){l||(X(f),l=!0)},o(t){Y(f),l=!1},d(t){t&&s(e),f&&f.d(),a=!1,o(i)}}}const Z=t=>!1;function tt(t,e,n){let o,l,{name:a}=e,i=[],r=0,d={x:0,y:0},s={width:20,height:20,x:0,y:0},c=u("https://i.pinimg.com/originals/10/d1/d3/10d1d39769c54e69a11c409038dc1adc.jpg");i.push(c),i=function(t,e){let n=null;try{if(n=JSON.parse(P.getItem(t)),""==n)throw new Error("Smile empty soul")}catch(t){console.warn(t),n=e}finally{return n}}("frameList",i),setInterval((()=>{G(i)}),4e3);const f=(t,e)=>{if(!t.dataTransfer.getData("frame id")){let e=t.dataTransfer.getData("text"),o=u(e);o.x=t.clientX,o.y=t.clientY,o.style=`position:fixed; left:${o.x}px; top:${o.y}px;`,e&&n(0,i=[...i,o])}"move"==t.dataTransfer.dropEffect&&t.dataTransfer.getData("frame id")},h=t=>{var e,o;let l=null===(e=null==t?void 0:t.clipboardData)||void 0===e?void 0:e.items[0].getAsFile(),a=null===(o=null==t?void 0:t.clipboardData)||void 0===o?void 0:o.getData("text");l&&(a=URL.createObjectURL(l),console.log(l),console.log(a)),console.log(t),console.log("paste");let r=u(a);r.x=0,r.y=0,r.style=`position:fixed; left:${r.x}px; top:${r.y}px;`,a&&n(0,i=[...i,r]),console.log(i),console.log(r.style)};function u(t){let e={url:t,width:400,height:400,x:0,y:0,style:"",id:r,topLeftHandle:s,topRightHandle:Object.assign(Object.assign({},s),{x:380}),bottomRightHandle:Object.assign(Object.assign({},s),{x:380,y:380}),bottomLeftHandle:Object.assign(Object.assign({},s),{y:380}),top:!0};return r+=1,n(0,i=b(e.id)),e}let g=!1;const p=()=>{g=!0},m=()=>{g=!1,n(2,o=null)};y();const x=(t,e,o)=>{let l=i[e];return g&&(n(1,d.x=t.movementX,d),n(1,d.y=t.movementY,d),l.width+=d.x,l.height+=d.y,l.bottomRightHandle.x+=d.x,l.bottomRightHandle.y+=d.y,l=function(t){return t.topLeftHandle.x=t.x,t.topLeftHandle.y=t.y,t.topRightHandle.x=t.x+t.width-t.topRightHandle.width,t.topRightHandle.y=t.y,t.bottomLeftHandle.x=t.x,t.bottomLeftHandle.y=t.y+t.height-t.bottomLeftHandle.height,t.bottomRightHandle.x=t.x+t.width-t.bottomRightHandle.width,t.bottomRightHandle.y=t.y+t.height-t.bottomRightHandle.height,t}(l),l.style=((t,e)=>{let n,o="",l=t.width,a=t.height;if(e)switch(e){case"tleft":l=t.topLeftHandle.width,a=t.topLeftHandle.height,n=` top: ${t.topLeftHandle.y}px; left: ${t.topLeftHandle.x}px;`;break;case"tright":l=t.topRightHandle.width,a=t.topRightHandle.height,n=` top: ${t.topRightHandle.y}px; left: ${t.topRightHandle.x}px;`;break;case"bleft":l=t.bottomLeftHandle.width,a=t.bottomLeftHandle.height,n=` top: ${t.bottomLeftHandle.y}px; left: ${t.bottomLeftHandle.x}px;`;break;case"bright":l=t.bottomRightHandle.width,a=t.bottomRightHandle.height,n=` top: ${t.bottomRightHandle.y}px; left: ${t.bottomRightHandle.x}px;`;break;default:return}return o=`width: ${l}px; height: ${a}px; position: fixed;`,e||(o+=` background-image: url('${t.url}'); top: ${t.y}px; left: ${t.x}px;`),e&&(o+=n),o})(l)),l};function b(t){return i.map((e=>e=e.id==t?Object.assign(Object.assign({},e),{top:!0}):Object.assign(Object.assign({},e),{top:!1})))}function $(t){switch(t.key){case"Delete":case"Backspace":n(0,i=i.filter((t=>0==t.top)))}}return t.$$set=t=>{"name"in t&&n(11,a=t.name)},[i,d,o,l,f,h,p,m,x,b,$,a,t=>$(t),t=>{n(0,i=b(t.id))},t=>{n(2,o=t),n(2,o=o?.detail?.frame.id),n(3,l=t),n(3,l=l?.detail?.edge),console.log(l)},t=>{n(0,i=b(t.id))},t=>m(),t=>{p()},t=>f(t),t=>h(t),t=>{i[o]&&n(0,i[o]=x(t,o),i)}]}return new class extends B{constructor(t){super(),q(this,t,tt,W,a,{name:11},null,[-1,-1])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
